function resizeFooter(){$("body:not(.body-mywed)").css("margin-bottom",$(".footer").outerHeight())}function setSessionValue(e,o){$.ajax({type:"POST",dataType:"JSON",url:"/main/setsessionvalue/",data:"key="+e+"&val="+o})}$(document).ready((function(){resizeFooter(),toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-full-width",preventDuplicates:!0,onclick:null,showDuration:"150",hideDuration:"250",timeOut:"3000",extendedTimeOut:"250",showEasing:"linear",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}})),$(window).resize((function(){resizeFooter()})),$(document).ready((function(){var e=!1;$(".navbar-burger .burger").on("click",(function(){var o=$(this),t=$(".navbar-nav");e?(t.css("display","none"),t.blur(),e=!1,o.removeClass("active")):(t.css("display","block"),e=!0,o.addClass("active"))}))}));
var $info,$btn=null,$modal=null,$form=null,response=null;function activateLabel(){$(this).closest(".form-group").find("label").addClass("active")}function deactivateLabel(){var e=$(this),t=e.closest(".form-group").find("label");e.val()||t.removeClass("active")}function formReset(e){e?(e[0].reset(),e.find('input[type="hidden"]').val(""),e.find("select").trigger("change")):($form[0].reset(),$form.find('input[type="hidden"]').val(""),$form.find("select").trigger("change")),$(document).trigger("onFormReset",modalEdit)}$(document).ready((function(){$(".form-control").on("focus",activateLabel),$(".form-control").on("blur",deactivateLabel)})),$(document).on("keypress",(function(e){13===e.which&&"TEXTAREA"!==e.target.tagName&&"SELECT"!==e.target.tagName&&(e.preventDefault(),$(e.target).closest("form").find(".btn-save").trigger("click"))}));var textareaFields=["invite","thanks","about","text"],checkboxFields=["hash_only","is_multiple_appeal"];function isTextareaField(e){return-1!==textareaFields.indexOf(e)}function isCheckboxField(e){return-1!==checkboxFields.indexOf(e)}function updateClassFields(){if("create"===modalEdit.mode)modalEdit.$currentList.prepend(modalEdit.modelTemplate(response.data));else if("update"===modalEdit.mode)if(null!=modalEdit.modelTemplate&&"guest"!=modalEdit.modelName)modalEdit.$valueWrapper.replaceWith(modalEdit.modelTemplate(response.data));else{var e=Object.keys(response.data.item);modalEdit.fields.forEach((function(t){var a='[data-value="'+t.replace(/_/g,"-")+'"]',n='[data-value="'+t.replace(/_/g,"-")+'-visible"]',o=t+"_visible";isTextareaField(t)?modalEdit.$valueWrapper.find(a).html(nl2br(response.data.item[t])):modalEdit.$valueWrapper.find(a).text(response.data.item[t]),modalEdit.$valueWrapper.find(n).length&&-1!==e.indexOf(o)&&modalEdit.$valueWrapper.find(n).text(response.data.item[o])}))}}function populateFormFields(){modalEdit.fields.forEach((function(e){isTextareaField(e)?setFieldValueTextarea(e,getDataValue(e)):isCheckboxField(e)?setFieldValueCheckbox(e,getDataValue(e)):setFieldValueInput(e,getDataValue(e))})),void 0!==modalEdit.$valueWrapper.data("id")&&setFieldValueInput("id",modalEdit.$valueWrapper.data("id"))}function setFieldValueTextarea(e,t){modalEdit.$form.find("["+getInputName(e)+"]").val(br2nl(t))}function setFieldValueCheckbox(e,t){modalEdit.$form.find("["+getInputName(e)+"]").attr("checked",1==t)}function setFieldValueInput(e,t){var a=e.split("->"),n="";n=a.length>1?"["+getInputName(a.join("]["))+"]":"["+getInputName(a.toString())+"]",modalEdit.$form.find(n).val(t)}function getInputName(e){return'name="'+modalEdit.modelName+"["+e.replace(/-/g,"_")+']"'}function getDataValue(e){var t='[data-value="'+e.replace(/_/g,"-")+'"]';return modalEdit.$valueWrapper.find(t).length?modalEdit.$valueWrapper.find(t).text():""}function setDataValue(e,t){var a='[data-value="'+e.replace(/_/g,"-")+'"]';modalEdit.$valueWrapper.find(a).length&&modalEdit.$valueWrapper.find(a).text(t)}function populateFieldsFromResponse(e,t,a,n){$(e);n.forEach((function(e){textareaFields.indexOf(e),$form.find('[name="'+t+"["+e+']"]').val(a[e])}))}function btnLoading(e){var t=e??$btn;t&&t.attr("disabled",!0).text(t.data("loading"))}function btnDone(e){var t=e??$btn;t&&t.attr("disabled",!1).text(t.data("title"))}class ApiRespone{constructor(e){this.status=e.status,this.reason=e.reason,this.data=e.data,this.errors=e.errors}echo(){this.status?this.reason&&toastr.info(this.reason):this.errors.length>0?toastr.error(this.errors[0].message):toastr.error(this.reason||"Возникла ошибка, попробуйте позже")}}function responseReason(e){res=new ApiRespone(e),res.echo()}function saveModalForm(e){$btn=modalEdit.$modal.find(".btn-save"),$.ajax({dataType:"JSON",url:modalEdit.$form.attr("action"),type:modalEdit.$form.attr("method"),data:modalEdit.$form.serialize(),beforeSend:btnLoading(),error:function(){responseReason({status:!1})},success:function(t){(response=t)&&response.status&&(updateClassFields(),modalEdit.$modal.length&&modalEdit.$modal.modal("hide"),null!=e&&e()),responseReason(response)},complete:btnDone()})}function deleteItem(e,t){var a=($btn=$(e)).closest(".block"),n=$btn.data("model-name"),o=$btn.data("id"),r=n;if(-1!==["repository","guest_category"].indexOf(r))switch(r){case"guest_category":r="guest_categories";break;case"repository":r="repositories"}else r+="s";var s=$("#"+n.replace(/_/g,"-")+"-"+o+" .primary").text();"guest"===n&&(s=$("#"+n.replace(/_/g,"-")+"-"+o+' .primary span[data-value="name"]').text()),confirm($btn.data("confirm")+" «"+s+"»?")&&$.ajax({type:"DELETE",datatype:"JSON",url:"/"+r.replace(/-/g,"_")+"/"+o+"/",error:function(){responseReason({status:!1})},success:function(e){(response=e)&&response.status&&($("#"+n.replace(/_/g,"-")+"-"+o).fadeOut("fast").remove(),toastr.warning(response.reason),void 0!==response.needRefresh&&response.needRefresh&&location.reload()),responseReason(response),t&&t(),a.trigger("onDeleteItem",[$btn])}})}function deleteItemGrid(e,t){var a=($btn=$(e)).data("id"),n=$btn.data("model-name"),o=$btn.data("delete-url");confirm($btn.data("confirm"))&&(void 0!==o?$.ajax({type:"DELETE",datatype:"JSON",url:o,error:function(){responseReason({status:!1})},success:function(e){(response=e)&&response.status&&($("#"+n+"-"+a).addClass("bounceOut"),setTimeout((function(){$("#"+n+"-"+a).addClass("hide")}),600),setTimeout((function(){$("#"+n+"-"+a).remove()}),1e3),toastr.warning(response.reason)),responseReason(response),t&&t()}}):$.ajax({type:"DELETE",datatype:"JSON",url:"/"+$btn.data("controller")+"/"+n.replace(/-/g,"_")+"/"+a+"/",error:function(){responseReason({status:!1})},success:function(e){(response=e)&&response.status&&($("#"+n+"-"+a).fadeOut("fast").remove(),toastr.warning(response.reason)),responseReason(response),t&&t()}}))}function doPost(e,t,a){doRequest("POST",e,t,a)}function doGet(e,t,a){doRequest("GET",e,t,a)}function doRequest(e,t,a,n){response=null,$.ajax({type:e,dataType:"JSON",url:t,data:a,beforeSend:btnLoading(),error:function(){responseReason({status:!1})},success:function(e){e.status&&n(e),responseReason(e)},complete:btnDone()})}function saveForm(e,t,a){$btn=$(e),doPost(($form=$("#form-"+t)).attr("action"),$form.serialize(),a)}function nl2br(e,t,a){var n=a?"<br />":"<br>";return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,t?"$1"+n:"$1"+n+"$2")}function br2nl(e,t){var a=t?"\n":"";return e.replace(/<\s*\/?br\s*[\/]?>/gi,a)}function getReadableFileSizeString(e){var t=-1;do{e/=1024,t++}while(e>1024);return Math.max(e,.1).toFixed(1)+" "+["Кбайт","Мбайт","Гбайт","Тбайт"][t]}
function disableShow(t,a){$.ajax({type:"POST",dataType:"JSON",url:`/${t}/disableshow/`,data:"key="+a})}$(".info .btn:not(.no-action)").on("click",(function(t){t.preventDefault(),$(this).closest(".info").fadeOut("fast"),disableShow($(this).data("controller"),$(this).data("key"))}));
$(document).ready((function(){function e(e){let n=e.target;"range"===e.target.type&&t(n)}function t(e){if("range"===e.type){const t=e.min,n=e.max,a=e.value;e.style.backgroundSize=100*(a-t)/(n-t)+"% 100%"}}document.querySelectorAll('input[type="range"]').forEach(n=>{n.addEventListener("input",e),t(n)})}));
$(".modal").on("show.bs.modal",(function(a){$(".modal .modal-dialog").attr("class","modal-dialog fadeIn animated superfast")})),$(".modal").on("hide.bs.modal",(function(a){$(".modal .modal-dialog").attr("class","modal-dialog slideOutDown animated superfast")}));
function initBlueimpGallery(e){document.getElementById(e)&&(document.getElementById(e).onclick=function(e){var t=(e=e||window.event).target||e.srcElement,n={index:t.src?t.parentNode:t,event:e},l=this.getElementsByTagName("a");blueimp.Gallery(l,n)})}
$("body").on("click",".btn-fab-download",(function(t){t.preventDefault();const o=$(this),a={controller:o.data("controller"),action:o.data("action"),mode:o.data("mode"),id:o.data("id")},n=$("#minitabs-filter-"+a.controller).find(".btn-filter.active").data("guest-category-id"),e=`/${a.controller}/?${new URLSearchParams({action:a.action,mode:a.mode,id:a.id,guest_category_id:n}).toString()}`;window.open(e,"_blank")}));
$("body").on("click",".btn-fab-help, .btn-help",(function(t){t.preventDefault(),$btn=$(this),$modal=$("#modal-text");var a={controller:$btn.data("controller"),action:$btn.data("action"),alias:$btn.data("alias")};doGet("/help/",a,(function(t){$modal.find(".modal-header .modal-title").html(t.data.title),$modal.find(".modal-body .text").html(t.data.html),$modal.modal("show")}))}));
function runImageSettings(){const e=document.querySelectorAll("#image-settings .drop-zone"),t=document.querySelectorAll("#image-settings .drop-zone-input"),a=document.querySelectorAll("#image-settings .image-settings__image-buttons");function s(e){i(e)}function n(e){i(e)}function d(e){const t=e.target.dataset.mode,{sectionAlias:a,imageAlias:s}=e.currentTarget.dataset;if(t)switch(t){case"upload":document.getElementById(`drop-zone-input-${a}-${s}`).click();break;case"delete":!function(e){var t=new XMLHttpRequest,a=new FormData;const s=e.target,{templateAlias:n,sectionAlias:d,imageAlias:i}=e.currentTarget.dataset;a.append("template_alias",n),a.append("section_alias",d),a.append("image_alias",i),t.open("POST","/templates/deleteTemplateImage/",!0),t.addEventListener("loadstart",()=>s.disabled=!0),t.addEventListener("loadend",()=>s.disabled=!1),t.addEventListener("readystatechange",()=>{if(4===t.readyState&&200===t.status){const e=$.parseJSON(t.responseText),a=`image-user-preview-${d}-${i}`;document.getElementById(a).style.backgroundImage=`url(${e.data.url})`,new ApiRespone(e).echo()}else 4===t.readyState&&t.status}),t.send(a)}(e);break;case"toggle":!function(e){const t=new XMLHttpRequest,a=new FormData,s=e.target,{templateAlias:n,sectionAlias:d,imageAlias:i}=e.currentTarget.dataset;a.append("template_alias",n),a.append("section_alias",d),a.append("image_alias",i),t.open("POST","/templates/toggleTemplateImage/",!0),t.addEventListener("loadstart",()=>s.disabled=!0),t.addEventListener("loadend",()=>s.disabled=!1),t.addEventListener("readystatechange",()=>{if(4===t.readyState&&200===t.status){const e=$.parseJSON(t.responseText),a=`image-user-preview-${d}-${i}`,n=document.getElementById(a);null!==e.data.disabled&&(e.data.disabled?(n.classList.add("disabled"),s.firstChild.data=s.dataset.disabledLabel):(n.classList.remove("disabled"),s.firstChild.data=s.dataset.defaultLabel)),new ApiRespone(e).echo()}else 4===t.readyState&&t.status}),t.send(a)}(e)}}function i(e){const a=new XMLHttpRequest,s=new FormData,n=e.target,{templateAlias:d,sectionAlias:i,imageAlias:r}=e.currentTarget.dataset;let l=null;e instanceof DragEvent?l=e.dataTransfer.files[0]:e.target.files.length>0&&(l=e.target.files[0]),s.append("file",l),s.append("template_alias",d),s.append("section_alias",i),s.append("image_alias",r),a.open("POST","/templates/uploadTemplateImage/",!0),a.addEventListener("loadstart",()=>n.disabled=!0),a.addEventListener("loadend",()=>n.disabled=!1),a.addEventListener("readystatechange",()=>{if(4===a.readyState&&200===a.status){t.forEach(e=>e.value="");const e=$.parseJSON(a.responseText),s=`image-user-preview-${i}-${r}`;document.getElementById(s).style.backgroundImage=`url(${e.data.url})`,new ApiRespone(e).echo()}else 4===a.readyState&&a.status}),a.send(s)}function r(e){e.target.classList.add("active")}function l(e){e.target.classList.remove("active")}function o(e){e.preventDefault(),e.stopPropagation()}["dragenter","dragover","dragleave","drop"].forEach(t=>{e.forEach(e=>{e.addEventListener(t,o,!1)})}),["dragenter","dragover"].forEach(t=>{e.forEach(e=>{e.addEventListener(t,r,!1)})}),["dragleave","drop"].forEach(t=>{e.forEach(e=>{e.addEventListener(t,l,!1)})}),e.forEach(e=>{e.addEventListener("drop",n,!1)}),t.forEach(e=>{e.addEventListener("change",s,!1)}),a.forEach(e=>{e.addEventListener("click",d,!1)})}document.addEventListener("DOMContentLoaded",runImageSettings);
var cropBoxOptions=null;function initCropBox(){cropBoxOptions={$modal:$("#modal-crop"),$cropWrapper:$("#modal-crop .crop-wrapper"),$cropWrapperImg:$("#modal-crop .crop-wrapper > img"),$loading:$("#modal-crop .loading"),$imgLoad:{},pathMask:{},data:[],aspectRatio:1}}initCropBox(),$(".btn-crop").on("click",(function(o){$btn=$(this),cropBoxOptions.$imgLoad=$btn.closest(".img-load"),cropBoxOptions.pathMask={controller:cropBoxOptions.$imgLoad.data("controller"),parent:cropBoxOptions.$imgLoad.data("parent"),imgUrl:cropBoxOptions.$imgLoad.find(".img-crop-target").attr("src")},cropBoxOptions.$cropWrapperImg.attr("src",cropBoxOptions.pathMask.imgUrl.replace("/thumbnail","")),cropBoxOptions.aspectRatio=cropBoxOptions.$imgLoad.data("aspect-ratio")??1,cropBoxOptions.$modal.modal("show"),setTimeout((function(){cropBoxOptions.$cropWrapperImg.cropper({autoCropArea:.7,aspectRatio:cropBoxOptions.aspectRatio,strict:1,moveable:!1,zoomable:!1,viewMode:1,crop:function(o){cropBoxOptions.data=[o.x,o.y,o.height,o.width,o.rotate]}}),cropBoxOptions.$cropWrapper.addClass("active"),cropBoxOptions.$loading.addClass("hide")}),600)})),$("#modal-crop").on("hidden.bs.modal",(function(){cropBoxOptions.$cropWrapperImg.cropper("destroy"),cropBoxOptions.$cropWrapperImg.attr("src","/img/default.jpg"),cropBoxOptions.$cropWrapper.removeClass("active"),cropBoxOptions.$loading.removeClass("hide"),initCropBox()})),$("#modal-crop").on("click",".btn-save",(function(){$btn=$(this);const o=`/${cropBoxOptions.pathMask.controller}/imgcrop/`,p={cropBoxData:cropBoxOptions.data,cropPathMask:cropBoxOptions.pathMask};doPost(o,p,()=>{var o=new Date,p=cropBoxOptions.pathMask.imgUrl;-1!==p.indexOf("?i=")&&(p=p.substring(0,p.indexOf("?i="))),p+="?i="+o.getTime(),cropBoxOptions.$imgLoad.find(".img-crop-target").attr("src",p),cropBoxOptions.$imgLoad.data("on-crop-done")&&window[cropBoxOptions.$imgLoad.data("on-crop-done")]&&window[cropBoxOptions.$imgLoad.data("on-crop-done")](p,cropBoxOptions.$imgLoad),cropBoxOptions.$imgLoad.data("callback-crop")&&window[cropBoxOptions.$imgLoad.data("callback-crop")](p,cropBoxOptions.$imgLoad),cropBoxOptions.$modal.modal("hide")})}));
$(document).ready((function(){$(".btn-fileupload").length&&$(".btn-fileupload").fileupload({url:"",dataType:"json",dropZone:null,add:function(a,o){var d=$(this).closest(".img-load");$(this).fileupload("option","url","/"+d.data("controller")+"/imgload/"),o.formData={parent:d.data("parent")},o.submit()},start:function(a,o){var d=$(this).closest(".img-load");d.find("img").attr("src","/img/default.jpg"),d.find(".loading").removeClass("hide"),d.find(".btn-fab-crop").addClass("hide"),d.data("on-load-start")&&window[d.data("on-load-start")]&&window[d.data("on-load-start")](d)},done:function(a,o){var d=$(this).closest(".img-load"),l=o.result.files[0];d.find("img").attr("src",l.thumbnailUrl),d.find(".loading").addClass("hide"),d.find(".btn-fab-crop").removeClass("hide"),toastr.info(d.data("done")),d.data("callback-load")&&window[d.data("callback-load")](l,d),d.data("on-load-done")&&window[d.data("on-load-done")]&&window[d.data("on-load-done")](l,d)}}),$(".fileupload").length&&$(".fileupload").fileupload({dataType:"json",dropZone:null}).bind("fileuploadchange",(function(a,o){if(o.files.length>20)return toastr.error("Вы не можете загружать более 20 фотографий за один раз!"),!1})).bind("fileuploadadd",(function(a,o){if(o.files[0].size>20971520)return toastr.error("Некоторые фотографии не загружены, т.к. они превышают лимит в 20 Мб на одну фотографию."),!1;o.formData={parent:jqueryFileUpload.id}})).bind("fileuploaddone",(function(a,o){var d=o.result.files[0];d.error&&toastr.error(d.error),jqueryFileUpload.$currentList.append(jqueryFileUpload.modelTemplate({item:d}))})).bind("fileuploaddestroy",(function(a,o){})).bind("fileuploadstart",(function(a){jqueryFileUpload.$progressBar.removeClass("hide")})).bind("fileuploadstop",(function(a,o){jqueryFileUpload.$progressBar.addClass("hide"),jqueryFileUpload.$progressBar.css("width","0%")})).bind("fileuploadprogressall",(function(a,o){var d=parseInt(o.loaded/o.total*100,10);jqueryFileUpload.$progressBar.css("width",d+"%")}))}));
class LocalizationsEditor{constructor(a){this.$btn=a,this.$form=$("#form-localizations").clone(),this.$formGroups=this.$form.find(".form-group"),this.$srcFormGroup=a.closest(".form-group"),this.$srcInput=this.$srcFormGroup.find('input[type="text"], textarea'),this.$srcLabel=this.$srcFormGroup.find("label"),this.localizations=null,this.url="/localizations/",this.data={table:this.$btn.data("localizations-table"),field:this.$btn.data("localizations-field"),row_id:0},null!=this.$btn.data("localizations-row-id")?this.data.row_id=this.$btn.data("localizations-row-id"):null!=modalEdit.$valueWrapper.data("id")&&(this.data.row_id=modalEdit.$valueWrapper.data("id"))}get dataSave(){var a=this.$form.serializeArray();return a.push({name:"table",value:this.data.table}),a.push({name:"field",value:this.data.field}),a.push({name:"row_id",value:this.data.row_id}),a}setLocalizations(a){if(this.localizations=a,null!=this.localizations)for(var t=0;t<this.localizations.length;t++)this.$form.find("#form-localization-text-"+this.localizations[t].localization).val(this.localizations[t].text)}show(){this.$form.find("h2").html("Локализация &mdash; "+this.$srcLabel.text()),this.$form.addClass("fadeIn animated superfast"),this.$formGroups.find("#form-localization-text-ru").val()||this.$formGroups.find("#form-localization-text-ru").val(this.$srcInput.val()),modalEdit.$form.addClass("hide"),modalEdit.$modal.find(".modal-dialog").append(this.$form)}hide(){modalEdit.$form.removeClass("hide"),modalEdit.$form.addClass("fadeIn animated superfast"),this.$form.remove(),this.destroy()}destroy(){this.$btn=null,this.$form=null,this.$formGroups=null,this.$srcFormGroup=null,this.$srcInput=null,this.$srcLabel=null,this.localizations=null,this.url=null,this.data=null}}var le=null;$(".modal-edit").on("click",".ico-localizations",(function(a){le=new LocalizationsEditor($(this)),doGet(le.url,le.data,(function(a){null!=a.data.localizations&&(le.setLocalizations(a.data.localizations),le.show())}))})),$(".modal-edit").on("click",".btn-back",(function(a){le.hide()})),$(".modal-edit").on("click",".btn-save-localizations",(function(a){doPost(le.url,le.dataSave,(function(a){le.$srcInput.val(a.data.currentLocalizationValue),setDataValue(a.data.field,a.data.currentLocalizationValue),le.hide()}))}));
function initListSortable(t){t.sortable({placeholder:"ui-state-highlight",cursor:"move",helper:listSortableHelper,handle:".btn-drag",items:"li",update:function(e,i){var r=[];t.find("li").each((function(t,e){r.push($(e).data("id"))}));var n={parent:t.data("parent"),ordering:r};doPost(t.data("url"),n,(function(){}))},stop:function(t,e){e.item.removeAttr("style")}}),t.disableSelection()}var listSortableHelper=function(t,e){return $(t.currentTarget).css("height","auto"),$(t.currentTarget).css("height",$(t.currentTarget).height()),setTimeout((function(){$(".ui-state-highlight").css("height",2*e.height())}),0),e};function initSortable(t){t.sortable({placeholder:"ui-state-highlight",cursor:"move",helper:fixHelper,handle:".btn-move",items:"li",update:function(e,i){var r=[];t.find("li").each((function(t,e){r.push($(e).data("id"))}));var n={parent:t.data("parent"),ordering:r};doPost(t.data("url"),n,(function(){}))},stop:function(t,e){e.item.removeAttr("style")}}),t.disableSelection()}var fixHelper=function(t,e){return $(t.currentTarget).css("height","auto"),$(t.currentTarget).css("height",$(t.currentTarget).height()),setTimeout((function(){$(".ui-state-highlight").css("height",e.height())}),0),e};
var currentTabId=null;function selectFirstTab(){$(".tabs .block").eq(0).addClass("active"),$(".tabs-select:not(.tabs-select-a) li").eq(0).addClass("active")}document.addEventListener("DOMContentLoaded",()=>{location.hash?selectTab(location.hash.replace("#","")):selectFirstTab()}),$(".tabs-select:not(.tabs-select-a) li").on("click",(function(e){selectTab($(this).data("target"))}));var swiperMenu=null;function selectTab(e){if($(".tabs-select li").removeClass("active"),$(".tabs .block").removeClass("active"),$("#tab-"+e).addClass("active"),$("#btn-"+e).addClass("active"),location.hash="#"+e,setSessionValue("tab",location.hash),currentTabId=e,$("#menu-side").trigger("onSelectTab",[e]),"templates"===e&&$("#tab-templates").trigger("onTemplateChoosen",{name_tech:$("#tab-templates .list-card.active").find(".btn-choose").data("name-tech")}),"template-settings"===e&&$("#tab-template-settings").trigger("onTemplateChoosen",{name_tech:$("#tab-templates .list-card.active").find(".btn-choose").data("name-tech")}),swiperMenu){const t=$("#swiper-slide-"+e);swiperMenu.slideTo(t.data("idx"),300,null)}$modal&&$modal.modal("hide")}$("#menu-side .swiper-container").length&&(swiperMenu=new Swiper("#menu-side .swiper-container",{slidesPerView:"auto",centeredSlides:!0,spaceBetween:10,slidesPerGroup:1,slideToClickedSlide:!0,grabCursor:!0,autoHeight:!0,on:{init:function(){if(location.hash){var e=$("#swiper-slide-"+location.hash.replace("#",""));this.slideTo(e.data("idx"),300,null)}setTimeout((function(){$("#menu-side .swiper-wrapper").css("visibility","visible")}),100)},slideChange:function(){selectTab($('.swiper-slide[data-idx="'+this.activeIndex+'"]').attr("id").replace("swiper-slide-",""))}}}));
var player,playerReady,playerInvoked=!1,playerStoped=!1,playerPaused=!1,playerPausedForced=!1;function initVideo(e,a){if(playerReady){$input=$("#"+e);var t=$("#"+a),r=$input.val(),n=t.attr("id");t.replaceWith('<div src="" frameborder="0" id="'+n+'" class="video-iframe"></div>'),r&&(-1==r.indexOf("https://")?toastr.warning("Ссылка на видео указана неверно"):createPlayer(t.attr("id"),ytGetId(r)))}else setTimeout((function(){initVideo(e,a)}),250)}function createPlayer(e,a){player=new YT.Player(e,{videoId:a,playerVars:{rel:0,modestbranding:1,loop:1,controls:1,showinfo:0,origin:window.location.origin},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}function onYouTubePlayerAPIReady(){playerReady=!0}function onPlayerReady(){}function onPlayerStateChange(e){e.data==YT.PlayerState.ENDED&&(playerStoped=!0),e.data==YT.PlayerState.PLAYING&&(playerInvoked=!0),e.data,YT.PlayerState.PAUSED}function startPlayer(){playerInvoked=!0,player.playVideo()}function stopPlayer(){playerStoped=!0,player.stopVideo()}function pausePlayer(){playerPaused=!0,player.pauseVideo()}function ytGetId(e){return void 0!==(e=e.split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?e[2].split(/[^0-9a-z_\-]/i)[0]:e[0]}